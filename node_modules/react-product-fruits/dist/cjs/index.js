"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");const t={init:function(e,t,r,o){!function(){if("undefined"==typeof window)throw new Error("product-fruits package can run only in the browser environment. If you use server-side-generation, please update your code to import this package only in the browser.");!function(e,t,r){e.$productFruits=e.$productFruits||[],e.productFruits=e.productFruits||{},e.productFruits.scrV="2";let o=t.getElementsByTagName("head")[0],n=t.createElement("script");n.async=1,n.src="https://app.productfruits.com/static/script.js",o.appendChild(n)}(window,document)}(),window.$productFruits.push(["init",e,t,r,o])},safeExec:function(e){if("function"!=typeof e)throw new Error("You have to pass a callback to safeExec");if(window.productFruitsIsReady)e(window.$productFruits);else{const t=()=>{e(window.$productFruits)};window.addEventListener("productfruits_ready",t,{once:!0})}}};function r(e,t,r){if(r||2===arguments.length)for(var o,n=0,i=t.length;n<i;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}exports.ProductFruits=function(r){if(null!=r.dontDestroy)return console.error("<ProductFruits /> - dontDestroy is deprecated and it WILL NOT work, use lifeCycle instead"),null;e.useEffect((function(){return t.init(r.workspaceCode,r.language,r.user,r.config),r.debug&&console.log("react-product-fruits - initialized"),function(){var e,t;r.lifeCycle&&"neverUnmount"!=r.lifeCycle?"unmount"==r.lifeCycle&&(r.debug&&console.log("react-product-fruits - destroying"),null===(t=null===(e=null===window||void 0===window?void 0:window.productFruits)||void 0===e?void 0:e.services)||void 0===t||t.destroy()):r.debug&&console.log("react-product-fruits - skipping destroying, lifeCycle default or set to neverUnmount",r.lifeCycle)}}),[]);var o=e.useRef(!0);return e.useEffect((function(){o.current?o.current=!1:(r.debug&&console.log("react-product-fruits - user prop updated"),t.safeExec((function(e){e.push(["updateUserData",r.user])})))}),[r.user]),null},exports.isProductFruitsReady=function(){return"undefined"!=typeof window&&!0===window.productFruitsIsReady},exports.useProductFruitsApi=function(t,o){var n=e.useCallback(t,o);e.useEffect((function(){if("undefined"!=typeof window){var e,t=function(){var t;e=n(null===(t=window.productFruits)||void 0===t?void 0:t.api)};return window.productFruitsIsReady&&window.productFruits&&window.productFruits.api?(e=n(window.productFruits.api),window.removeEventListener("productfruits_ready",t)):window.addEventListener("productfruits_ready",t,{once:!0}),function(){window.removeEventListener("productfruits_ready",t),"function"==typeof e&&e()}}}),r(r([],o,!0),[n],!1))};
//# sourceMappingURL=index.js.map
