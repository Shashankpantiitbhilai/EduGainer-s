import{useCallback as t,useEffect as e,useRef as r}from"react";const o={init:function(t,e,r,o){!function(){if("undefined"==typeof window)throw new Error("product-fruits package can run only in the browser environment. If you use server-side-generation, please update your code to import this package only in the browser.");!function(t,e,r){t.$productFruits=t.$productFruits||[],t.productFruits=t.productFruits||{},t.productFruits.scrV="2";let o=e.getElementsByTagName("head")[0],n=e.createElement("script");n.async=1,n.src="https://app.productfruits.com/static/script.js",o.appendChild(n)}(window,document)}(),window.$productFruits.push(["init",t,e,r,o])},safeExec:function(t){if("function"!=typeof t)throw new Error("You have to pass a callback to safeExec");if(window.productFruitsIsReady)t(window.$productFruits);else{const e=()=>{t(window.$productFruits)};window.addEventListener("productfruits_ready",e,{once:!0})}}};function n(t,e,r){if(r||2===arguments.length)for(var o,n=0,i=e.length;n<i;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function i(r,o){var i=t(r,o);e((function(){if("undefined"!=typeof window){var t,e=function(){var e;t=i(null===(e=window.productFruits)||void 0===e?void 0:e.api)};return window.productFruitsIsReady&&window.productFruits&&window.productFruits.api?(t=i(window.productFruits.api),window.removeEventListener("productfruits_ready",e)):window.addEventListener("productfruits_ready",e,{once:!0}),function(){window.removeEventListener("productfruits_ready",e),"function"==typeof t&&t()}}}),n(n([],o,!0),[i],!1))}function u(){return"undefined"!=typeof window&&!0===window.productFruitsIsReady}function d(t){if(null!=t.dontDestroy)return console.error("<ProductFruits /> - dontDestroy is deprecated and it WILL NOT work, use lifeCycle instead"),null;e((function(){return o.init(t.workspaceCode,t.language,t.user,t.config),t.debug&&console.log("react-product-fruits - initialized"),function(){var e,r;t.lifeCycle&&"neverUnmount"!=t.lifeCycle?"unmount"==t.lifeCycle&&(t.debug&&console.log("react-product-fruits - destroying"),null===(r=null===(e=null===window||void 0===window?void 0:window.productFruits)||void 0===e?void 0:e.services)||void 0===r||r.destroy()):t.debug&&console.log("react-product-fruits - skipping destroying, lifeCycle default or set to neverUnmount",t.lifeCycle)}}),[]);var n=r(!0);return e((function(){n.current?n.current=!1:(t.debug&&console.log("react-product-fruits - user prop updated"),o.safeExec((function(e){e.push(["updateUserData",t.user])})))}),[t.user]),null}export{d as ProductFruits,u as isProductFruitsReady,i as useProductFruitsApi};
//# sourceMappingURL=index.js.map
